;/*FB_PKG_DELIM*/

__d("MBugNub",["ErrorPubSub","LogHistory","MBugNubConfig","MURI","Stratcom"],(function(a,b,c,d,e,f,g){var h,i,j=[],k=[],l=[],m=a.location;c("MBugNubConfig").uri&&(i=new(c("MURI"))(c("MBugNubConfig").uri).getPath());c("Stratcom").listen("history:change",null,function(b){n()||(m=a.location)});function n(b){var d=new(c("MURI"))(i);b=new(c("MURI"))(b||a.location);return b.normalize().getPath()===d.normalize().getPath()}function b(a,b,c){return o(i,a,b,c)}function o(a,b,d,e){a=new(c("MURI"))(a);a.addQueryData("uri",new(c("MURI"))(m).normalize().toString());a.addQueryData("source",b);a.addQueryData("description",d);a.addQueryData("st",e);return a.toString()}function e(){l=d("LogHistory").getEntries().slice()}function p(a){return l.slice(a?Math.max(l.length-a,0):0)}function f(a){j.push(a)}function q(a){return j.slice(a?Math.max(j.length-a,0):0)}function r(a,b,c){a=document.getElementById(a);b=document.getElementById(b);c=document.getElementById(c);var e=q(5);e.length>0&&a&&(a.value="\n"+e.map(function(a){return"  Message: "+a.message+"\n"+(a.guardList.length>0?"  Guards: "+a.guardList.join(", ")+"\n":"")+(a.stack?"  Stack: "+a.stack+"\n":"")}).join("\n  --\n"));a=p(100);a.length>0&&b&&(b.value="\n"+d("LogHistory").formatEntries(a));k.length>0&&c&&(c.value=JSON.stringify(k))}(h||(h=c("ErrorPubSub"))).addListener(f);function s(a,b){k.push({queryId:a,serialized:b})}g.isReportURI=n;g.getReportURI=b;g.captureState=e;g.pushError=f;g.fillValueInInputs=r;g.logFeedItem=s}),98);
__d("MProfilePictureEditFunnelLogger",["FunnelLogger","MDOM","SubscriptionsHandler","destroyOnUnload"],(function(a,b,c,d,e,f,g){var h="MSITE_PROFILE_PICTURE_EDIT_FUNNEL",i=null;c("destroyOnUnload")(function(){i&&(i.release(),i=null),d("FunnelLogger").endFunnel(h)});function j(a){i||(i=new(c("SubscriptionsHandler"))()),i.addSubscriptions(a)}function a(a,b){j(d("MDOM").listen(a,"click",null,function(){d("FunnelLogger").startFunnel(h),d("FunnelLogger").addFunnelTag(h,b)}))}function b(a,b,c){var e="start_picture_selection";a!=null&&(e=e+"_"+a,c&&(e+="_personal"));j(d("MDOM").listen(b,"click",null,function(){d("FunnelLogger").appendAction(h,e)}))}function e(a){j(d("MDOM").listen(a,"click",null,function(a){a=a.getTarget();a.id==="nuxPicFileInput"?d("FunnelLogger").appendAction(h,"click_file_input_button"):(a.id==="nuxUploadPhotoButton"||a.type==="submit"&&a.nodeName==="BUTTON")&&d("FunnelLogger").appendAction(h,"click_confirm_upload_button")}))}g.attachEditIconListener=a;g.attachPictureSelectionListener=b;g.attachFileInputUploadButtonGroupListener=e}),98);
__d("MModalDialogLink",["MLegacyDataStore","MModalDialog","MPageController","Stratcom"],(function(a,b,c,d,e,f){var g="dialog-link";b("Stratcom").listen("click",g,function(a){a.prevent();var c=a.getNode(g);switch(c.getAttribute("rel")){case"dialog":b("MModalDialog").open(b("MLegacyDataStore").get(a.getNode(g)).dialogURI,function(a){a&&(a.redirectURI?b("MPageController").forceLoad(a.redirectURI):a.refresh&&b("MPageController").reload())},c.getAttribute("data-loading-title"));break;case"dialog-load":b("MModalDialog").load(b("MLegacyDataStore").get(a.getNode(g)).dialogURI,{dontPushState:!1,hideNavBar:!1},c.getAttribute("data-loading-title"));break;case"dialog-close":b("MModalDialog").close({redirectURI:b("MLegacyDataStore").get(a.getNode(g)).dialogURI,goBack:!0});break;case"dialog-close-and-navigate":b("MModalDialog").close({redirectURI:b("MLegacyDataStore").get(a.getNode(g)).dialogURI,goBack:!1});break;case"dialog-close-and-refresh":b("MModalDialog").close({refresh:!0,goBack:!0});break}})}),null);
__d("Clipboard",["Promise","UserAgent"],(function(a,b,c,d,e,f,g){var h;function a(){return window.document&&window.document.queryCommandSupported instanceof Function&&window.document.queryCommandSupported("copy")&&!(c("UserAgent").isBrowser("Firefox < 41")||c("UserAgent").isPlatform("iOS < 10.3"))||c("UserAgent").isBrowser("Chrome >= 43")}function i(a,b){b=b||document.body;if(!b)return!1;var d=document.activeElement,e=!0,f=document.createElement("textarea");b.appendChild(f);f.value=a;if(c("UserAgent").isPlatform("iOS >= 10.3")){a=document.createRange();a.selectNodeContents(f);var g=window.getSelection();g.removeAllRanges();g.addRange(a);f.setSelectionRange(0,999999)}else f.select();try{e=document.execCommand("copy")}catch(a){e=!1}b.removeChild(f);d!=null&&d.focus();return e}function d(a){var c=window.navigator;if(c&&c.clipboard&&typeof c.clipboard.writeText==="function")return c.clipboard.writeText(a);return i(a)?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).reject()}g.isSupported=a;g.copy=i;g.copyAsync=d}),98);
__d("MLoggedOutUFILogger",["LoggedOutLoginSignupBarTypedLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){new(c("LoggedOutLoginSignupBarTypedLogger"))().setEvent(a).setSurface(b).log()}function a(a){h("story_permalink_share_flyout_option_click",a)}g.log=h;g.logSharesheetClick=a}),98);
__d("MLoggedOutShareFlyout",["Clipboard","MDataStore","MEvent","MLoggedOutUFILogger","SubscriptionsHandler","URI","XLoginController","gkx","goURI"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var b=this;this.$4=null;this.$7=function(a){var e=b.$10();e=c("XLoginController").getURIBuilder().setString("next",e.toString()).getURI();d("MLoggedOutUFILogger").logSharesheetClick(22);b.$11(e,a);b.$6()};this.$8=function(a){var e=b.$10(),f=b.$12();f!=null&&(e=e.addQueryData("scmts",f));f=new(h||(h=c("URI")))("https://api.whatsapp.com/send").addQueryData({ref:"whatsapp_share_message",text:e.toString()});d("MLoggedOutUFILogger").logSharesheetClick(23);b.$11(f,a)};this.$9=function(a){a=b.$10().toString();if(a!=null){a=d("Clipboard").copy(a);a&&b.$1.hide()}};this.$1=a.flyout;this.$2=a.shareOptions;this.$3=a.loggedOutCTASurface;this.$5()}var b=a.prototype;b.$5=function(){this.$6(),this.$4=new(c("SubscriptionsHandler"))(),this.$4.addSubscriptions(c("MEvent").listen(this.$2.writePost,"click",this.$7.bind(this)),c("MEvent").listen(this.$2.sendInWA,"click",this.$8.bind(this)),this.$1.addListener("beforeshow",function(){d("MLoggedOutUFILogger").log("story_permalink_share_flyout_load")})),this.$2.copyLink!=null&&this.$4!=null&&this.$4.addSubscriptions(c("MEvent").listen(this.$2.copyLink,"click",this.$9.bind(this)))};b.$10=function(){var a=this.$1.getContext();a=d("MDataStore").get(a,"shareable_uri","");return typeof a==="string"?new(h||(h=c("URI")))(a).getQualifiedURI():new(h||(h=c("URI")))("")};b.$11=function(a,b){c("goURI")(a),this.$1.hide(),b.preventDefault()};b.$6=function(){this.$4!=null&&this.$4.release()};b.$12=function(){return this.$3==="story_permalink"&&c("gkx")("1108874")?"scwsplos":null};return a}();g["default"]=a}),98);
__d("MVideoHomeSearchForm",["cx","MDOM","Stratcom","SubscriptionsHandler","URI","ge","getActiveElement","goURI"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j="watch-search-form-root-sigil";a=function(){function a(a){var b=this;this.$9=function(){b.$8()};this.$11=function(){b.$8()};this.$10=function(){b.$8()};this.$12=function(){b.$3.value="",b.$8()};this.$13=function(a){a.prevent();a=b.$3.value;if(a==="")return;b.$3.blur();a=(i||(i=c("URI"))).getRequestURI();a.setPath("/watch/search/");a.addQueryData("q",b.$3.value);c("goURI")(a)};this.$1=new(c("SubscriptionsHandler"))();this.$2=c("ge")(j);this.$3=d("MDOM").find(this.$2,"input","search-small-box");this.$4=d("MDOM").find(this.$2,"form","search-typeahead-form");this.$5=this.$2.getElementsByClassName("_5-ly")[0];this.$6=d("MDOM").find(this.$2,"button","search-submit-button");this.setQuery((a=a.initialQuery)!=null?a:"");this.$7();this.$8()}var b=a.prototype;b.destroy=function(){this.$1.release()};b.setQuery=function(a){this.$3.value=a};b.$7=function(){var a;this.$1.addSubscriptions((a=d("MDOM")).listen(this.$3,"focus",null,this.$9),a.listen(this.$3,"blur",null,this.$10),a.listen(this.$3,"input",null,this.$11),a.listen(this.$5,"mousedown",null,this.$12),a.listen(this.$5,"touchstart",null,this.$12),a.listen(this.$4,"submit",null,this.$13))};b.$8=function(){this.$3.value?d("MDOM").show(this.$6):d("MDOM").hide(this.$6);var a=c("getActiveElement")()===this.$3;a&&this.$3.value?d("MDOM").show(this.$5):d("MDOM").hide(this.$5)};a.initialize=function(b){var d=new a(b);c("Stratcom").listen("m:page:unload",null,function(){d.destroy(),c("Stratcom").removeCurrentListener()})};return a}();g["default"]=a}),98);
__d("MLoggedOutVideoHomeSearchOverlay",["MDOM","MOverlay","MVideoHomeSearchForm","Stratcom","ge"],(function(a,b,c,d,e,f,g){"use strict";var h=["/watch?","/watch/","/videos/","/videos/?"],i=["/watch","/videos"],j="search_jewel_container_sigil",k="watch-search-icon-container",l="watch-search-overlay-content",m="watch-search-icon",n="watch-search-overlay-back",o="watch-search-form-page-header",p="search-small-box";a=function(){function a(a){var b=this;this.searchOverlay=a.searchOverlay;this.searchOverlayConfig=this.searchOverlay.config;this.initialQuery=a.initialQuery;a=this.searchOverlay.getContentRoot();this.searchOverlayContent=c("MDOM").find(a,"div",l);this.existingSearchFormInPageHeader=c("ge")(o);this.watchSearchEntrypoint=c("ge")(k,null,"div");this.nonWatchSearchEntrypoint=c("ge")(j,null,"div");this.existingSearchFormInPageHeader!=null?this.searchInput=c("MDOM").find(this.existingSearchFormInPageHeader,"input",p):this.searchInput=c("MDOM").find(this.searchOverlayContent,"input",p);this.searchFormInitalized=!1;this.$1();this.$2();c("Stratcom").listen("m:page:beforeloading",null,function(){b.$2()})}var b=a.prototype;b.$1=function(){var a=this;c("Stratcom").listen("click",m,function(b){b.prevent(),a.existingSearchFormInPageHeader==null?(a.searchOverlay.isDestroyed()===!0&&(a.searchOverlay=new(c("MOverlay"))(a.searchOverlayConfig,a.searchOverlayContent),a.searchFormInitalized=!1,a.existingSearchFormInPageHeader=c("ge")(o),a.existingSearchFormInPageHeader!=null?a.searchInput=c("MDOM").find(a.existingSearchFormInPageHeader,"input",p):a.searchInput=c("MDOM").find(a.searchOverlayContent,"input",p)),a.searchOverlay.show()):a.searchInput.focus()});c("Stratcom").listen("Layer:show",null,function(){a.searchFormInitalized!==!0&&(c("MVideoHomeSearchForm").initialize({initialQuery:a.initialQuery}),a.searchFormInitalized=!0);var b=a.searchInput;window.setTimeout(function(){b.focus()},1)});c("Stratcom").listen("click",[l,n],function(b){b.prevent(),a.searchOverlay.hide()})};b.$2=function(){var a=window.location.href,b=h.some(function(b){return a.includes(b)})||i.some(function(b){return a.endsWith(b)});b?(this.watchSearchEntrypoint.style.display="block",this.nonWatchSearchEntrypoint.style.display="none"):(this.watchSearchEntrypoint.style.display="none",this.nonWatchSearchEntrypoint.style.display="block")};return a}();g["default"]=a}),98);
__d("XVideoHomeMobileCommentsModalController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/watch/msite/comments/",{video_id:{type:"FBID",required:!0},comment_modal_body_id:{type:"String"}})}),null);
__d("MVideoHomePermalinkComments",["cx","$","MCSS","MEvent","MLegacyDataStore","MParent","MRequest","Stratcom","VideoHomeTypedLogger","XVideoHomeMobileCommentsModalController"],(function(a,b,c,d,e,f,g,h){"use strict";var i=[],j=[];function k(a,b,e){if(j.includes(b))return;var f=c("$")(b);f=d("MParent").bySigil(f,"m-layer-root");if(f==null)return;f=d("MLegacyDataStore").get(f).layer;f.addListener("show",function(){if(!i.includes(b)){var d=new(c("MRequest"))().setURI(c("XVideoHomeMobileCommentsModalController").getURIBuilder().setFBID("video_id",a).setString("comment_modal_body_id","#".concat(b)).getURI()),e=d.listen("done",function(){i.push(b),f(),new(c("VideoHomeTypedLogger"))().setEvent("logged_out_msite_comment_modal_impression").log()}),f=e.remove;d.send()}document.body&&c("MCSS").addClass(document.body,"_9da8")});f.addListener("hide",function(){document.body&&c("MCSS").removeClass(document.body,"_9da8")});j.push(b);if(e!==""){var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!0);window.setTimeout(function(){c("$")(e).dispatchEvent(g)},0)}}a={forwardCommentButtonClick:function(a,b){var d=c("$")(b),e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0);c("MEvent").listen(a,"click",function(){d.dispatchEvent(e)})},initCommentBottomsheetObserver:function(a,b,d){var e=c("Stratcom").listen("m:layer:init",null,function(){k(a,b,d)}),f=c("Stratcom").listen("m:page:unload",null,function(){e.remove(),f.remove()})}};g["default"]=a}),98);
__d("XBasicFBNuxViewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/megaphone/view_fbnux/",{nux_id:{type:"Int",required:!0}})}),null);
__d("PagesEventObserver",["Banzai"],(function(a,b,c,d,e,f){var g="pages_client_logging",h={VITAL_WAIT:b("Banzai").VITAL_WAIT,logData_DEPRECATED:function(a,c){c={delay:c||b("Banzai").VITAL_WAIT};b("Banzai").post(g,a,c)},notify:function(a,c,d,e,f){d=babelHelpers["extends"]({},d,{event_name:a,page_id:c,dedupe:e!==!1});a={delay:f||b("Banzai").VITAL_WAIT};b("Banzai").post(g,d,a)},registerLogOnClick:function(a,b,c){c===void 0&&(c=null),a.addEventListener("click",function(){c&&h.notify(c,b,null,null,null)})}};a=h;f["default"]=a}),66);